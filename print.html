<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ROS机器人操作系统课程学习</title>
        <meta name="robots" content="noindex" />


        <!-- Custom HTML head -->
        
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="01.ROS概述与环境搭建/intro.html"><strong aria-hidden="true">1.</strong> 第一章 ROS概述与环境搭建</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="01.ROS概述与环境搭建/Ubuntu debian.html"><strong aria-hidden="true">1.1.</strong> Ubuntu Linux（Debian packages）</a></li><li class="chapter-item expanded "><a href="01.ROS概述与环境搭建/Windows 二进制.html"><strong aria-hidden="true">1.2.</strong> Windows（二进制）安装</a></li><li class="chapter-item expanded "><a href="01.ROS概述与环境搭建/macos.html"><strong aria-hidden="true">1.3.</strong> MacOS（源码）</a></li></ol></li><li class="chapter-item expanded "><a href="02.ROS2教程/intro.html"><strong aria-hidden="true">2.</strong> 第二章 ROS2教程</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="02.ROS2教程/初级/配置你的 ROS2 环境.html"><strong aria-hidden="true">2.1.</strong> 配置你的 ROS2 环境</a></li><li class="chapter-item expanded "><a href="02.ROS2教程/初级/介绍 turtlesim 和 rqt/intro.html"><strong aria-hidden="true">2.2.</strong> 介绍 turtlesim 和 rqt</a></li><li class="chapter-item expanded "><a href="02.ROS2教程/初级/理解 ROS2 nodes/intro.html"><strong aria-hidden="true">2.3.</strong> 理解 ROS2 nodes</a></li></ol></li><li class="chapter-item expanded "><a href="03.How-to指南/intro.html"><strong aria-hidden="true">3.</strong> 第三章 How-to指南</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">ROS机器人操作系统课程学习</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="第一章-ros概述与环境搭建"><a class="header" href="#第一章-ros概述与环境搭建">第一章 ROS概述与环境搭建</a></h1>
<h2 id="01ros简介"><a class="header" href="#01ros简介">01.ROS简介</a></h2>
<p>简单点说，<strong>ROS就是一个分布式的通信框架，帮助程序进程之间更方便地通信。</strong></p>
<p>一个机器人通常包含多个部件，每个部件都有配套的控制程序，以实现机器人的运动与视听功能等。那么要协调一个机器人中的这些部件，或者协调由多个机器人组成的机器人集群，怎么办呢？这时就需要让分散的部件能够互相通信，在多机器人集群中，这些分散的部件还分散在不同的机器人上。<strong>解决这种分布式通信问题正是ROS的设计初衷。</strong></p>
<h3 id="1-ros的性能特色"><a class="header" href="#1-ros的性能特色">1. ROS的性能特色</a></h3>
<p>ROS是一个机器人领域的元操作系统。也就是说，它并不是真正意义上的操作系统，其底层的任务调度、编译、设备驱动等还是由它的原生操作系统Ubuntu Linux完成。</p>
<p><strong>ROS实际上是运行在Ubuntu Linux上的亚操作系统</strong>，或者说软件框架，但提供硬件抽象、函数调用、进程管理这些类似操作系统的功能，也提供用于获取、编译、跨平台的函数和工具。</p>
<p><strong>ROS的核心思想就是将机器人的软件功能做成一个个节点，节点之间通过互相发送消息进行沟通</strong>。这些节点可以部署在同一台主机上，也可以部署在不同主机上，甚至还可以部署在互联网上。ROS网络通信机制中的主节点（master）负责对网络中各个节点之间的通信过程进行管理调度，同时提供一个用于配置网络中全局参数的服务。</p>
<p>ROS是松耦合软件框架，利用分布式通信机制实现节点间的进程通信。ROS的软件代码以松耦合方式组织，开发过程灵活，管理维护方便。</p>
<p>ROS具有丰富的开源功能库。ROS是基于BSD（Berkeley Software Distribution，伯克利软件发行）协议的开源软件，允许任何人修改、重用、重发布以及在商业和闭源产品中使用，使用ROS能够快捷地搭建自己的机器人原型。</p>
<h3 id="2-ros-2-vs-ros-1"><a class="header" href="#2-ros-2-vs-ros-1">2. ROS 2 vs ROS 1</a></h3>
<p>自从2007年开始，机器人技术和机器人技术界发生了很大的变化。ROS 2项目的目标是适应这些变化，利用ROS 1的优点，改进不足之处。</p>
<p><a href="http://design.ros2.org/articles/changes.html">ROS 1 与 ROS 2 之间的区别</a></p>
<p><a href="https://roboticsbackend.com/ros1-vs-ros2-practical-overview/">ROS 1 vs ROS2，ROS 开发者的实用概述</a></p>
<h3 id="3-ros的学习方法"><a class="header" href="#3-ros的学习方法">3. ROS的学习方法</a></h3>
<p>要想学好以及用好ROS，需要进行大量的实践操作。因此在快速了解ROS的核心概念和编程范式后，就要结合大量的实际项目来深入理解ROS。学会用正确的方式解决问题，能帮你更快地提高能力。ROS的学习资源主要有以下几个。</p>
<ul>
<li>官网：<a href="https://www.ros.org/">www.ros.org</a></li>
<li>源码：github.com</li>
<li>ROS 2文档：<a href="http://docs.ros.org/en/humble/">docs.ros.org</a></li>
<li>ROS 1文档：<a href="https://wiki.ros.org/">wiki.ros.org</a></li>
<li>问答：<a href="https://answers.ros.org/questions/">answers.ros.org</a></li>
</ul>
<h3 id="4-安装"><a class="header" href="#4-安装">4. 安装</a></h3>
<ul>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Ubuntu%20debian.html">Ubuntu Linux（Debian packages）</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html">Windows(二进制)</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/macos.html">MacOS（源码）</a></li>
</ul>
<h2 id="02-教程"><a class="header" href="#02-教程">02 教程</a></h2>
<p><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/../02.ROS2%E6%95%99%E7%A8%8B/intro.html">参见</a></p>
<h2 id="03-how-to-指南"><a class="header" href="#03-how-to-指南">03 How-to 指南</a></h2>
<p><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/../03.How-to%E6%8C%87%E5%8D%97/intro.html">参见</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ubuntu-linuxdebian-packages"><a class="header" href="#ubuntu-linuxdebian-packages">Ubuntu Linux（Debian packages）</a></h1>
<p><a href="http://docs.ros.org/en/humble/Installation/Ubuntu-Install-Debians.html">todo</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="windows二进制"><a class="header" href="#windows二进制">Windows(二进制)</a></h1>
<h2 id="目录"><a class="header" href="#目录">目录</a></h2>
<ul>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E7%B3%BB%E7%BB%9F%E8%A6%81%E6%B1%82">系统要求</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85%E5%89%8D%E5%87%86%E5%A4%87">安装前准备</a>
<ul>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-chocolatey">安装 chocolatey</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-python">安装 python</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-visual-c-%E5%8F%AF%E5%86%8D%E5%8F%91%E8%A1%8C%E7%BB%84%E4%BB%B6">安装 Visual C++ 可再发行组件</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-openssl">安装 openssl</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-visual-studio%E8%BF%87%E7%A8%8B%E7%9C%81%E7%95%A5">安装 Visual Studio（过程省略）</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-opencv">安装 OpenCV</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-qt5">安装 Qt5</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85-rqt-%E4%BE%9D%E8%B5%96">安装 RQt 依赖</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85%E5%85%B6%E4%BB%96%E4%BE%9D%E8%B5%96">安装其他依赖</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E5%AE%89%E8%A3%85%E9%99%84%E5%8A%A0%E7%9A%84-dds-%E5%AE%9E%E7%8E%B0%E5%8F%AF%E9%80%89">安装附加的 DDS 实现（可选）</a></li>
</ul>
</li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E4%B8%8B%E8%BD%BD-ros2">下载 ROS2</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E7%8E%AF%E5%A2%83%E8%AE%BE%E7%BD%AE">环境设置</a></li>
<li><a href="01.ROS%E6%A6%82%E8%BF%B0%E4%B8%8E%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/Windows%20%E4%BA%8C%E8%BF%9B%E5%88%B6.html#%E8%AF%95%E8%AF%95%E5%AE%98%E6%96%B9%E7%9A%84%E4%BE%8B%E5%AD%90">试试官方的例子</a></li>
</ul>
<h2 id="系统要求"><a class="header" href="#系统要求">系统要求</a></h2>
<p>目前只支持 Windows 10。</p>
<h2 id="安装前准备"><a class="header" href="#安装前准备">安装前准备</a></h2>
<h3 id="安装-chocolatey"><a class="header" href="#安装-chocolatey">安装 Chocolatey</a></h3>
<ol>
<li>
<p>使用管理员模式打开 <code>PowerShell</code> 程序</p>
</li>
<li>
<p>使用 <code>PowerShell</code> 程序安装</p>
<ol>
<li>使用 <code>PowerShell</code> 时，必须确保 <code>Get-ExecutionPolicy</code> 不受限制。我们建议使用 Bypass 策略进行安装，或使用 或 AllSigned 策略以在安装过程中获得更多的安全性。</li>
<li>运行 <code>Get-ExecutionPolicy</code>，如果返回 <code>Restricted</code>，那么运行 <code>Set-ExecutionPolicy AllSigned</code> 或 <code>Set-ExecutionPolicy Bypass -Scope Process</code></li>
<li>接着运行下面命令 </li>
</ol>
<pre><code class="language-shell">Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))
</code></pre>
</li>
<li>
<p>等待几秒钟完成安装</p>
</li>
<li>
<p>如果您没有看到任何错误，就可以使用 <code>choco -?</code> 查看效果</p>
</li>
</ol>
<p>你可以使用 Chocolatey 来安装一些其他的开发工具。</p>
<h3 id="安装-python"><a class="header" href="#安装-python">安装 Python</a></h3>
<p>打开命令提示符，输入以下命令通过 Chocolatey 安装 Python:</p>
<pre><code class="language-shell">choco install -y python --version 3.8.3
</code></pre>
<blockquote>
<p>注意</p>
<p>一定要安装 3.8 版本的 Python，高于 3.8 版本会引出其他问题！</p>
</blockquote>
<h3 id="安装-visual-c-可再发行组件"><a class="header" href="#安装-visual-c-可再发行组件">安装 Visual C++ 可再发行组件</a></h3>
<p>打开一个命令提示符，输入以下命令通过 Chocolatey 安装它们:</p>
<pre><code class="language-shell">choco install -y vcredist2013 vcredist140
</code></pre>
<h3 id="安装-openssl"><a class="header" href="#安装-openssl">安装 OpenSSL</a></h3>
<p>从 <a href="https://slproweb.com/products/Win32OpenSSL.html">该页</a> 下载 Win64 OpenSSL v1.1.1o OpenSSL 安装程序。滚动到页面底部，下载 Win64 OpenSSL v1.1.1o。不要下载 Win32 或 Light 版本。</p>
<p>使用默认参数运行安装程序，因为以下命令假定您使用了默认安装目录。您需要将 <code>C:\Program Files\OpenSSL-Win64\bin\openssl.cfg</code> 设置为 <code>OPENSSL_CONF</code> 环境变量； 还需要将 OpenSSL-Win64 bin 文件夹附加到您的 <code>PATH</code> 环境变量中。</p>
<h3 id="安装-visual-studio过程省略"><a class="header" href="#安装-visual-studio过程省略">安装 Visual Studio（过程省略）</a></h3>
<h3 id="安装-opencv"><a class="header" href="#安装-opencv">安装 OpenCV</a></h3>
<p>有些例子需要安装 OpenCV。</p>
<p>你可以从 <a href="https://github.com/ros2/ros2/releases/download/OpenCV-archives/OpenCV-3.4.6-vc16.vs2019.zip">https://github.com/ros2/ros2/releases/download/OpenCV-archives/OpenCV-3.4.6-vc16.vs2019.zip</a> 下载 OpenCV 3.4.6的预编译版本。</p>
<p>假设您将其解压缩到 <code>c:\opencv</code>，在命令提示符上输入以下命令(需要管理员权限) :</p>
<pre><code class="language-shell">setx /m OpenCV_DIR C:\opencv
</code></pre>
<p>因为您使用的是预编译的 ROS 版本，所以我们必须告诉它在哪里可以找到 OpenCV 库。您必须将 <code>c:\opencv\x64\vc16\bin</code> 添加到 PATH 环境变量中。</p>
<h3 id="安装-qt5"><a class="header" href="#安装-qt5">安装 Qt5</a></h3>
<p>从 Qt 的网站下载 <a href="https://www.qt.io/offline-installers">5.12.x 离线安装程序</a> 。运行安装程序。确保在 <code>Qt -&gt; Qt 5.12.12</code> 树下选择 <code>MSVC 2017 64-bit</code> 组件。</p>
<p>最后，在管理员 cmd.exe 窗口中设置这些环境变量。下面的命令假设您将它安装到了 <code>c:\Qt</code> 的默认位置：</p>
<pre><code class="language-shell">setx /m Qt5_DIR C:\Qt\Qt5.12.12\5.12.12\msvc2017_64
setx /m QT_QPA_PLATFORM_PLUGIN_PATH C:\Qt\Qt5.12.12\5.12.12\msvc2017_64\plugins\platforms
</code></pre>
<blockquote>
<p>注意</p>
<p>这个路径可能会根据安装的 MSVC 版本、安装 Qt 的目录以及安装 Qt 的版本而改变。</p>
</blockquote>
<h3 id="安装-rqt-依赖"><a class="header" href="#安装-rqt-依赖">安装 RQt 依赖</a></h3>
<p>要运行 <code>rqt_graph</code>，需要 <a href="https://graphviz.gitlab.io/_pages/Download/Download_windows.html">下载</a> 并安装 <a href="https://graphviz.gitlab.io/">Graphviz</a> 。安装程序将询问是否将 graphviz 添加到 PATH 环境变量，选择将其添加到当前用户或所有用户。</p>
<h3 id="安装其他依赖"><a class="header" href="#安装其他依赖">安装其他依赖</a></h3>
<p>在 Chocolatey 包数据库中有一些依赖项是不可用的。为了简化手动安装过程，我们提供必要的 Chocolatey 包。</p>
<p>由于一些 Chocolatey 包依赖它，我们从安装 CMake 开始</p>
<pre><code class="language-shell">choco install -y cmake
</code></pre>
<p>您需要将 CMake bin 文件夹 <code>c:\Program Files\CMake\bin</code> 附加到 PATH 环境变量中。</p>
<p>请从 <a href="https://github.com/ros2/choco-packages/releases/latest">这个 GitHub 库</a> 下载这些软件包：</p>
<ul>
<li>asio.1.12.1.nupkg</li>
<li>bullet.3.17.nupkg</li>
<li>cunit.2.1.3.nupkg</li>
<li>eigen-3.3.4.nupkg</li>
<li>tinyxml-usestl.2.6.2.nupkg</li>
<li>tinyxml2.6.0.0.nupkg</li>
</ul>
<p>下载完这些包后，打开一个管理 shell 并执行以下命令:</p>
<pre><code class="language-shell">choco install -y -s &lt;PATH\TO\DOWNLOADS\&gt; asio cunit eigen tinyxml-usestl tinyxml2 bullet
</code></pre>
<p>请用您下载软件包的文件夹替换 <code>&lt;PATH\TO\DOWNLOADS\&gt;</code>。</p>
<p>升级 pip 和 setuptools：</p>
<pre><code class="language-shell">pip3 install -U pip setuptools==59.6.0
</code></pre>
<p>现在安装一些附加的 python 依赖项:</p>
<pre><code class="language-shell">pip3 install -U catkin_pkg cryptography empy importlib-metadata lark==1.1.1 lxml matplotlib netifaces numpy opencv-python PyQt5 pillow psutil pycairo pydot pyparsing==2.4.7 pyyaml rosdistro
</code></pre>
<p>如果安装速度太慢，可以使用</p>
<pre><code class="language-shell">pip3 install --proxy=http://[username:password@]proxyserver:port somePackage...
</code></pre>
<p>设置代理的方式下载。</p>
<h3 id="安装附加的-dds-实现可选"><a class="header" href="#安装附加的-dds-实现可选">安装附加的 DDS 实现（可选）</a></h3>
<p>如果您想使用其他 DDS 或 RTPS 供应商除了默认 —— Fast DDS —— 您可以在 <a href="http://docs.ros.org/en/humble/Installation/DDS-Implementations">这里</a> 找到指令。</p>
<h2 id="下载-ros2"><a class="header" href="#下载-ros2">下载 ROS2</a></h2>
<p>官方并没有提供 <code>Humble Hawksbill</code> 的二进制版本，取而代之的是，你可以下载 <a href="http://docs.ros.org/en/humble/Installation/Testing.html#prerelease-binaries">预发布</a> 的二进制文件。</p>
<ul>
<li>下载 Windows 的最新包，例如 <code>ros2-package-Windows-amd64.zip</code></li>
<li>将 zip 文件解压到某个地方（我们假设 <code>c:\dev\ross2_humble</code>）</li>
</ul>
<h2 id="环境设置"><a class="header" href="#环境设置">环境设置</a></h2>
<p>启动一个命令 shell，找到 ROS 2 设置文件来设置工作区:</p>
<p>如果是 cmd.exe 需要使用下面命令</p>
<pre><code class="language-shell">call C:\dev\ros2_humble\local_setup.bat
</code></pre>
<p>如果是 PowerShell 需要使用下面命令</p>
<pre><code class="language-shell">C:\dev\ros2_humble\local_setup.ps1
</code></pre>
<p>正常情况下，如果前面的命令没有出错，则输出 “系统找不到指定的路径” 就一次。</p>
<h2 id="试试官方的例子"><a class="header" href="#试试官方的例子">试试官方的例子</a></h2>
<p>在运行例子之前，我们要先安装 <code>packaging</code> 包：</p>
<pre><code class="language-shell">pip3 install --upgrade pip
pip3 install packaging
</code></pre>
<blockquote>
<p>注意</p>
<p>在官方教程中并没有这一步，但的确需要先安装该依赖。</p>
</blockquote>
<p>在一个命令 shell 中，设置上面描述的 ROS2 环境，然后运行一个 c++ <code>talker</code>:</p>
<pre><code class="language-shell">ros2 run demo_nodes_cpp talker
</code></pre>
<p>启动另一个命令 shell 并运行一个 Python <code>listener</code>:</p>
<pre><code class="language-shell">ros2 run demo_nodes_py listener
</code></pre>
<p>你应该看到 <code>talker</code> 说它正在 <code>Publishing</code> 消息，而 <code>listener</code> 说 <code>I heard</code> 那些消息。这将验证 C++ 和 Python api 是否正常工作。万岁！</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="macos源码"><a class="header" href="#macos源码">MacOS（源码）</a></h1>
<p><a href="http://docs.ros.org/en/humble/Installation/Alternatives/macOS-Development-Setup.html">todo</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="教程"><a class="header" href="#教程">教程</a></h1>
<p>学习教程的最好方法是按顺序首次遍历它们，因为它们是相互依存的，也并不是全面的文档。</p>
<p>有关更具体问题的快速解决方案，请参见 <a href="02.ROS2%E6%95%99%E7%A8%8B/../03.How-to%E6%8C%87%E5%8D%97/intro.html">How-to 指南</a> 。</p>
<h2 id="初级"><a class="header" href="#初级">初级</a></h2>
<h3 id="cli-工具"><a class="header" href="#cli-工具">CLI 工具</a></h3>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html">配置你的 ROS2 环境</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html">介绍 turtlesim 和 rqt</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html">理解 ROS2 nodes</a></li>
<li>理解 ROS2 topics</li>
<li>理解 ROS2 services</li>
<li>理解 ROS2 parameters</li>
<li>理解 ROS2 actions</li>
<li>使用 rqt_console</li>
<li>介绍 ROS2 launch</li>
<li>录制和播放数据</li>
</ul>
<h3 id="客户端库"><a class="header" href="#客户端库">客户端库</a></h3>
<ul>
<li>创建 workspace</li>
<li>创建你的第一个 ROS2 package</li>
<li>写一个简单的发布者和订阅者（C++）</li>
<li>写一个简单的发布者和订阅者（Python）</li>
<li>写一个简单的 service 和 client（C++）</li>
<li>写一个简单的 service 和 client（Python）</li>
<li>创建自定义的 ROS2 msg 和 srv 文件</li>
<li>扩展 ROS2 接口</li>
<li>在一个类中使用 parameters（C++）</li>
<li>在一个类中使用 parameters（Python）</li>
<li>入门 ros2doctor</li>
<li>创建和使用 Plugins（C++）</li>
</ul>
<h2 id="中级"><a class="header" href="#中级">中级</a></h2>
<ul>
<li>使用 rosdep 管理依赖项</li>
<li>创建一个 action</li>
<li>写一个 action server 和 client（C++）</li>
<li>写一个 action server 和 client（Python）</li>
<li>在单个进程中组合多个 nodes</li>
<li>使用 colcon 构建 ROS2 包</li>
<li>监控 parameters 的变化（C++）</li>
<li>launch 教程</li>
<li>tf2 教程</li>
<li>URDF 教程</li>
</ul>
<h2 id="高级"><a class="header" href="#高级">高级</a></h2>
<ul>
<li>ROS2 Topic 统计教程（C++）</li>
<li>使用 Fast DDS Discovery Server 作为发现协议</li>
<li>实现一个自定义的内存分配器</li>
<li>释放 Fast DDS 作为 ROS2 中间件的所有的潜能</li>
<li>从您自己的节点记录一个包（C++）</li>
<li>从您自己的节点记录一个包（Python）</li>
</ul>
<h2 id="仿真器"><a class="header" href="#仿真器">仿真器</a></h2>
<ul>
<li>仿真器教程</li>
</ul>
<h2 id="安全"><a class="header" href="#安全">安全</a></h2>
<ul>
<li>介绍 ROS2 的安全性</li>
<li>理解 ROS2 的 Security Keystore</li>
<li>设备之间的安全性</li>
<li>检查网络流量</li>
<li>安全访问控制</li>
</ul>
<h2 id="其他"><a class="header" href="#其他">其他</a></h2>
<ul>
<li>使用 eclipse 2021-06 构建 ROS2 package</li>
</ul>
<h2 id="样例"><a class="header" href="#样例">样例</a></h2>
<ul>
<li>使用服务质量（QoS）设置来处理有损网络</li>
<li>具有托管生命周期的 nodes 管理</li>
<li>高效的进程内通信</li>
<li>ROS1 和 ROS2 之间的桥接通信</li>
<li>使用 ROS1 桥通过 rosbag 记录和回放 topic 数据</li>
<li>使用 ROS2 演示 TurtleBot 2</li>
<li>使用 ROS2 演示 TurtleBot 3</li>
<li>在 ROS 上模拟 TurtleBot 3</li>
<li>在仿真器中操作 TurtleBot 3</li>
<li>在仿真器中操作 TurtleBot 3 进行 SLAM 扫描</li>
<li>MoveIt 2 手臂运动规划演示</li>
<li>编写使用 ROS2 api 的实时安全代码</li>
<li>使用机器人状态发布程序发布关节状态和 TF</li>
<li>日志和日志记录器配置</li>
<li>内容过滤订阅</li>
</ul>
<h2 id="示例"><a class="header" href="#示例">示例</a></h2>
<ul>
<li>Python 和 C++ 最小的例子</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="配置你的-ros2-环境"><a class="header" href="#配置你的-ros2-环境">配置你的 ROS2 环境</a></h1>
<h2 id="目录-1"><a class="header" href="#目录-1">目录</a></h2>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#%E8%83%8C%E6%99%AF">背景</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#%E5%89%8D%E6%8F%90">前提</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#1-%E5%90%AF%E7%94%A8%E5%AE%89%E8%A3%85%E6%96%87%E4%BB%B6">1. 启用安装文件</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#2-%E5%B0%86%E5%90%AF%E5%8A%A8%E7%8E%AF%E5%A2%83%E5%AE%89%E8%A3%85%E8%BF%87%E7%A8%8B%E6%B7%BB%E5%8A%A0%E5%88%B0-shell-%E5%90%AF%E5%8A%A8%E8%84%9A%E6%9C%AC%E4%B8%AD">2. 将启动环境安装过程添加到 shell 启动脚本中</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#3-%E6%A3%80%E6%9F%A5%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3. 检查环境变量</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#31-ros_domain_id-%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F">3.1. ROS_DOMAIN_ID 环境变量</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E9%85%8D%E7%BD%AE%E4%BD%A0%E7%9A%84%20ROS2%20%E7%8E%AF%E5%A2%83.html#%E5%B0%8F%E7%BB%93">小结</a></li>
</ul>
<h2 id="背景"><a class="header" href="#背景">背景</a></h2>
<p>ROS2 依赖于使用 shell 环境组合工作空间的概念。<code>Workspace（工作区）</code> 是 ROS 术语，指的是您正在使用 ROS2 开发的系统上的位置。核心 ROS2 workspace 被称为 <code>underlay</code>。后续的本地 workspace 称为 <code>overlays</code>。当使用 ROS2 进行开发时，通常会有几个 workspace 并发操作运行。</p>
<p>组合使用 workspace 使得针对 ROS2 的不同版本或针对不同的包集合开发更加容易。它还允许在同一台计算机上安装若干个 ROS2 发行版，并在它们之间进行切换。</p>
<p>这可以通过在每次打开新 shell 时启动安装文件，或者向 shell 启动脚本中添加一次 source 命令来实现。如果没有启用安装文件（设置 ROS2 环境），您将无法访问 ROS2 的命令，或者查找或使用 ROS2 包。换句话说，你也就不能使用 ROS2。</p>
<h2 id="前提"><a class="header" href="#前提">前提</a></h2>
<h3 id="1-启用安装文件"><a class="header" href="#1-启用安装文件">1. 启用安装文件</a></h3>
<p>你需要在打开的每个新 shell 上运行这个命令来访问 ROS2 命令，如下所示:</p>
<pre><code class="language-shell">call C:\dev\ros2\local_setup.bat
</code></pre>
<blockquote>
<p>注意</p>
<p>确切的命令取决于您安装 ROS2 的位置。如果出现问题，请确保文件路径指向安装。</p>
<p>另外，上面命令只能在运行 cmd.exe 的环境中使用，如果使用 PowerShell 环境，请看下面。</p>
</blockquote>
<h3 id="2-将启动环境安装过程添加到-shell-启动脚本中"><a class="header" href="#2-将启动环境安装过程添加到-shell-启动脚本中">2. 将启动环境安装过程添加到 shell 启动脚本中</a></h3>
<p>如果你不想在每次打开一个新的 shell 时都必须启用代码安装文件（跳过第1步），那么你可以将命令添加到你的 shell 启动脚本中:</p>
<p>只有 PowerShell 用户才可以在 <code>我的文档</code> 中创建一个名为 <code>WindowsPowerShell</code> 的文件夹。在 <code>WindowsPowerShell</code> 中，创建文件 <code>Microsoft.PowerShell_profile.ps1</code>。在文件中，粘贴:</p>
<pre><code class="language-shell">C:\dev\ros2_humble\local_setup.ps1
</code></pre>
<blockquote>
<p>注意</p>
<p>因为在我的文档目录下创建 <code>WindowsPowerShell</code> 文件夹以及创建 <code>Microsoft.PowerShell_profile.ps1</code> 文件这些都是 PowerShell 中 profile 的概念。与 Shell 系统概念类似（例如 ~/.bashrc、~/.zshrc、~/.bash_profile 等等），PowerShell 也可以定义一个启动环境时默认加载的脚本文件，它使用 <code>$PROFILE</code> 表示。在 PowerShell 环境中，输入下面命令可以查看 <code>$PROFILE</code> 参数的值：</p>
<pre><code class="language-shell">&gt; $PROFILE
C:\Users\xxx\Documents\PowerShell\Microsoft.PowerShell_profile.ps1
</code></pre>
<p>使用 <code>Test-Path</code> cmdlet 可以检查是否存在该文件：</p>
<pre><code class="language-shell">&gt; Test-Path $PROFILE
True
</code></pre>
<p>当然，<code>True</code> 表示存在，<code>False</code> 表示不存在。我们还可以使用 <code>New-Item</code> cmdlet 将该文件创建出来：</p>
<pre><code class="language-shell">New-Item -Path $PROFILE -ItemType &quot;file&quot; -Force
</code></pre>
<p>另外，<code>$PROFILE</code> 和 <code>$profile</code> 似乎都是可以的，貌似不区分大小写。</p>
</blockquote>
<p>每次打开新的 shell 时，PowerShell 都会请求运行该脚本的权限。为了避免这个问题，你可以运行:</p>
<pre><code class="language-shell">Unblock-File C:\dev\ros2_humble\local_setup.ps1
</code></pre>
<blockquote>
<p>注意</p>
<p>我并没有出现每次都要请求运行脚本权限的问题，相反，使用了 <code>Unblock-File</code> 命令后，反而不起作用了……</p>
</blockquote>
<p>要撤消这一操作，请删除新的 <code>Microsoft.PowerShell_profile.ps1</code> 文件即可。</p>
<h3 id="3-检查环境变量"><a class="header" href="#3-检查环境变量">3. 检查环境变量</a></h3>
<p>启用 ROS2 设置安装文件将设置 ROS2 所必需的几个环境变量。如果您在寻找或使用 ROS2 包时遇到问题，请确保使用以下命令正确设置您的环境:</p>
<pre><code class="language-shell">set | findstr -i ROS
</code></pre>
<blockquote>
<p>注意</p>
<p>这里的 <code>set</code> 命令依然只能在 cmd.exe 环境中使用。如果想要在 PowerShell 中打印所有环境变量，可以使用</p>
<pre><code class="language-shell">gci env:*
</code></pre>
<p>其中 <code>gci</code> 是 <code>Get-ChildItem</code> 的缩写。</p>
</blockquote>
<p>检查 <code>ROS_DISTRO</code> 和 <code>ROS_VERSION</code> 等环境变量是否被设置了。</p>
<pre><code class="language-shell">ROS_VERSION=2
ROS_PYTHON_VERSION=3
ROS_DISTRO=humble
</code></pre>
<p>如果没有正确设置环境变量，可能需要检查安装过程是否正确。</p>
<h4 id="31-ros_domain_id-环境变量"><a class="header" href="#31-ros_domain_id-环境变量">3.1. ROS_DOMAIN_ID 环境变量</a></h4>
<p>有关 ROS 域 ID 的详细信息，请参阅 <a href="http://docs.ros.org/en/humble/Concepts/About-Domain-ID.html">域 ID 文章</a> 。</p>
<p>一旦确定了 ROS2 代理程序组的唯一整数，你可以使用以下命令设置环境变量:</p>
<pre><code class="language-shell">set ROS_DOMAIN_ID=&lt;your_domain_id&gt;
</code></pre>
<p>如果希望在 shell 会话之间永久保持这种状态，也可以运行:</p>
<pre><code class="language-shell">setx ROS_DOMAIN_ID &lt;your_domain_id&gt;
</code></pre>
<h2 id="小结"><a class="header" href="#小结">小结</a></h2>
<p>ROS2 开发环境在使用之前需要正确配置。这可以通过两种方式来实现: 要么在打开的每个新 shell 中启用 ROS2 的安装文件，要么在启动脚本中添加启用 ROS2 安装文件的命令。</p>
<p>如果您在使用 ROS2 查找或使用包时遇到任何问题，您应该做的第一件事是检查您的环境变量，并确保它们被设置为您想要的版本和发行版本。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="介绍-turtlesim-和-rqt"><a class="header" href="#介绍-turtlesim-和-rqt">介绍 turtlesim 和 rqt</a></h1>
<h2 id="目录-2"><a class="header" href="#目录-2">目录</a></h2>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#%E8%83%8C%E6%99%AF">背景</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#%E5%89%8D%E6%8F%90">前提</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#1-%E5%AE%89%E8%A3%85-turtlesim">1. 安装 turtlesim</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#2-%E5%90%AF%E5%8A%A8-turtlesim">2. 启动 turtlesim</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#3-%E4%BD%BF%E7%94%A8-turtlesim">3. 使用 turtlesim</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#4-%E5%AE%89%E8%A3%85-rqt">4. 安装 rqt</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#5-%E4%BD%BF%E7%94%A8-rqt">5. 使用 rqt</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#51-%E5%B0%9D%E8%AF%95-spawn-service">5.1. 尝试 spawn service</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#52-%E5%B0%9D%E8%AF%95-set_pen-service">5.2. 尝试 set_pen service</a></li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#6-%E9%87%8D%E6%96%B0%E6%98%A0%E5%B0%84">6. 重新映射</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#7-%E5%85%B3%E9%97%AD-turtlesim">7. 关闭 turtlesim</a></li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/intro.html#%E5%B0%8F%E7%BB%93">小结</a></li>
</ul>
<h2 id="背景-1"><a class="header" href="#背景-1">背景</a></h2>
<p><code>Turtlesim</code> 是一个学习 ROS2 的轻量级模拟器。它说明了 ROS2 在最基本的层面上做了什么，以便让你知道稍后你将用真实的机器人或机器人模拟做什么。</p>
<p><code>rqt</code> 是 ROS2 的 GUI 工具。在 rqt 中完成的所有操作都可以在命令行上完成，但是它提供了一种更简单、更用户友好的方法来操作 ROS2 元素。</p>
<p>本教程涉及 ROS2 的核心概念，如分离的 nodes、topics 和 services。所有这些概念都将在以后的教程中详细介绍; 现在，您将简单地设置工具并对它们有所了解。</p>
<h2 id="前提-1"><a class="header" href="#前提-1">前提</a></h2>
<h3 id="1-安装-turtlesim"><a class="header" href="#1-安装-turtlesim">1. 安装 turtlesim</a></h3>
<p>只要你安装 ROS2 的归档文件包含 <code>ros_tutorials</code> 存储库，你就应该已经安装了 <code>turtlesim</code>。</p>
<p>检查 <code>turtlesim</code> 软件包是否已安装:</p>
<pre><code class="language-shell">ros2 pkg executables turtlesim
</code></pre>
<p>上面的命令应该返回一个 turtlesim 的可执行文件列表:</p>
<pre><code class="language-shell">turtlesim draw_square.exe
turtlesim mimic.exe
turtlesim turtle_teleop_key.exe
turtlesim turtlesim_node.exe
</code></pre>
<h3 id="2-启动-turtlesim"><a class="header" href="#2-启动-turtlesim">2. 启动 turtlesim</a></h3>
<p>要启动 <code>turtlesim</code>，请在终端中输入以下命令:</p>
<pre><code class="language-shell">ros2 run turtlesim turtlesim_node
</code></pre>
<p>模拟器窗口应该出现，随机乌龟在中心。</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/%E4%B9%8C%E9%BE%9F.png" alt="turtlesim" /></p>
<p>在命令下的终端中，您将看到来自 nodes 的消息:</p>
<pre><code class="language-shell">[INFO] [1654185059.953086400] [turtlesim]: Starting turtlesim with node name /turtlesim
[INFO] [1654185060.045926800] [turtlesim]: Spawning turtle [turtle1] at x=[5.544445], y=[5.544445], theta=[0.000000]
</code></pre>
<p>在这里你可以看到你的默认乌龟的名字是 <code>turtle1</code>，和它产生的默认坐标。</p>
<h3 id="3-使用-turtlesim"><a class="header" href="#3-使用-turtlesim">3. 使用 turtlesim</a></h3>
<p>再次打开新的终端并启用 ROS2 安装配置文件。</p>
<p>现在您将运行一个新的 node 来控制第一个 node 中的 turtle:</p>
<pre><code class="language-shell">ros2 run turtlesim turtle_teleop_key
</code></pre>
<p>这时你应该打开两个窗口: 一个运行 <code>turtlesim_node</code> 的终端，一个运行 <code>turtle_teleop_key</code> 的终端。安排这些窗口，使运行 <code>turtle_teleop_key</code> 的终端窗口激活，这样你就可以控制乌龟的行动了。使用键盘上的箭头键来控制乌龟。它将在屏幕上移动，使用附加的“钢笔”来绘制它到目前为止所遵循的路径。</p>
<blockquote>
<p>注意</p>
<p>按下箭头键只会使乌龟移动一小段距离然后停止。这是因为，实际上，如果操作员失去了与机器人的连接，你不会希望机器人继续执行指令。</p>
</blockquote>
<p>您可以使用 list 命令查看 nodes 及其相关的 service、topics 和 actions:</p>
<pre><code class="language-shell">ros2 node list
ros2 topic list
ros2 service list
ros2 action list
</code></pre>
<p>例如：</p>
<pre><code class="language-shell">&gt; ros2 node list
/teleop_turtle
/turtlesim
</code></pre>
<pre><code class="language-shell">&gt; ros2 topic list
/parameter_events
/rosout
/turtle1/cmd_vel
/turtle1/color_sensor
/turtle1/pose
</code></pre>
<pre><code class="language-shell">&gt; ros2 service list
/clear
/kill
/reset
/spawn
/teleop_turtle/describe_parameters
/teleop_turtle/get_parameter_types
/teleop_turtle/get_parameters
/teleop_turtle/list_parameters
/teleop_turtle/set_parameters
/teleop_turtle/set_parameters_atomically
/turtle1/set_pen
/turtle1/teleport_absolute
/turtle1/teleport_relative
/turtlesim/describe_parameters
/turtlesim/get_parameter_types
/turtlesim/get_parameters
/turtlesim/list_parameters
/turtlesim/set_parameters
/turtlesim/set_parameters_atomically
</code></pre>
<pre><code class="language-shell">&gt; ros2 action list
/turtle1/rotate_absolute
</code></pre>
<p>您将在接下来的教程中了解更多关于这些概念的内容。由于本教程的目标仅仅是对 turtlesim 进行一个大致的了解，因此我们将使用 rqt (ROS2 的图形用户界面)来进一步了解服务。</p>
<h3 id="4-安装-rqt"><a class="header" href="#4-安装-rqt">4. 安装 rqt</a></h3>
<p>打开一个新的终端来安装 <code>rqt</code> 和它的插件:</p>
<p>在 Windows 上安装 ROS2 的标准归档文件包含了 <code>rqt</code> 及其插件，因此您应该已经安装了 <code>rqt</code>。</p>
<p>运行 rqt:</p>
<pre><code class="language-shell">rqt
</code></pre>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt.png" alt="rqt" /></p>
<h3 id="5-使用-rqt"><a class="header" href="#5-使用-rqt">5. 使用 rqt</a></h3>
<p>第一次运行 <code>rqt</code> 后，窗口将为空白。不用担心，只需从顶部的菜单栏中选择 <strong>Plugins &gt; Services &gt; Service Caller</strong> 程序。</p>
<blockquote>
<p>注意</p>
<p><code>rqt</code> 可能需要一些时间来定位所有的插件本身。如果您单击 <strong>Plugins</strong>，但是没有看到 <strong>Services</strong> 或其他选项，那么您应该关闭 <code>rqt</code>，在您的终端中输入命令 <code>rqt --force-discover</code>。</p>
</blockquote>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt2.png" alt="rqt2" /></p>
<p>使用 <strong>Service</strong> 下拉列表左侧的刷新按钮确保 <code>turtlesim</code> node 的所有 service 都可用。</p>
<p>单击 <strong>Service</strong> 下拉列表查看 <code>turtlesim</code> 的 service，然后选择 <code>/spawn</code> service。</p>
<h4 id="51-尝试-spawn-service"><a class="header" href="#51-尝试-spawn-service">5.1. 尝试 spawn service</a></h4>
<p>让我们使用 <code>rqt</code> 来调用 <code>/spawn</code> 服务。你可以从它的名字猜到 <code>/spawn</code> 会在 <code>turtlesim</code> 窗口创造另一只海龟。</p>
<p>给新乌龟一个独特的名字，比如 <code>turtle2</code>，双击 <strong>Expression</strong> 列中的空单引号。您可以看到，该表达式对应于 <strong>name</strong> 值，并且是 <strong>string</strong> 类型的。</p>
<p>输入新的海龟出现的坐标，比如 <code>x = 1.0</code> 和 <code>y = 1.0</code>。</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt3.png" alt="rqt3" /></p>
<blockquote>
<p>注意</p>
<p>如果你试图生成一个与现有乌龟同名的新乌龟，比如你的默认 <code>turtle1</code>，你会在终端运行的 <code>turtlesim_node</code> 中得到一个错误消息:</p>
<pre><code>[ERROR] [turtlesim]: A turtle named [turtle1] already exists
</code></pre>
</blockquote>
<p>要产生 turtle2，你必须通过点击 <code>rqt</code> 窗口右上角的 <strong>Call</strong> 按钮来调用服务。</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt4.png" alt="rqt4" /></p>
<p>您将在输入 <strong>x</strong> 和 <strong>y</strong> 的坐标处看到一个新的海龟（同样是随机设计的）产生。</p>
<p>如果刷新 <code>rqt</code> 中的服务列表，您还将看到，除了 <code>/turtle1/...</code> 之外，现在还有与新乌龟 <code>/turtle2/...</code> 相关的服务。</p>
<h4 id="52-尝试-set_pen-service"><a class="header" href="#52-尝试-set_pen-service">5.2. 尝试 set_pen service</a></h4>
<p>现在让我们用 <code>/set_pen</code> service 给 turtle1 一支独一无二的笔：</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt5.png" alt="rqt5" /></p>
<p><strong>r</strong>、<strong>g</strong> 和 <strong>b</strong> 的值介于 0 和 255 之间，它们将设置钢笔画的颜色，而 <strong>width</strong> 则设置线条的粗细。</p>
<p>要让 turtle1 绘制一条明显的红线，请将 <strong>r</strong> 的值更改为 255，而 <strong>width</strong> 的值更改为 5。不要忘记在更新值之后调用服务。</p>
<p>如果你回到 <code>turtle_teleop_key</code> 运行的终端，按下箭头键，你会看到 turtle1 的笔已经改变了：</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt6.png" alt="rqt6" /></p>
<p>你可能已经注意到没有办法移动 turtle2。你可以通过将 turtle1 的 <code>cmd_vel</code> topic 重新映射到 turtle2 来实现。</p>
<h3 id="6-重新映射"><a class="header" href="#6-重新映射">6. 重新映射</a></h3>
<p>在一个新的终端，启用 ROS2 安装配置文件，并运行:</p>
<pre><code class="language-shell">ros2 run turtlesim turtle_teleop_key --ros-args --remap turtle1/cmd_vel:=turtle2/cmd_vel
</code></pre>
<p>现在你可以在这个终端激活时移动 turtle2，当另一个运行 <code>turtle_teleop_key</code> 的终端激活时移动 turtle1。</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E4%BB%8B%E7%BB%8D%20turtlesim%20%E5%92%8C%20rqt/rqt7.png" alt="rqt7" /></p>
<h3 id="7-关闭-turtlesim"><a class="header" href="#7-关闭-turtlesim">7. 关闭 turtlesim</a></h3>
<p>要停止模拟，您可以在 <code>turtlesm_node</code> 终端中输入 Ctrl + C 退出，在控制乌龟行动的终端中输入 <code>q</code> 退出。</p>
<h2 id="小结-1"><a class="header" href="#小结-1">小结</a></h2>
<p>使用 <code>turtlesim</code> 和 <code>rqt</code> 是学习 ROS2 核心概念的好方法。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="理解-ros2-nodes"><a class="header" href="#理解-ros2-nodes">理解 ROS2 nodes</a></h1>
<h2 id="目录-3"><a class="header" href="#目录-3">目录</a></h2>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#%E8%83%8C%E6%99%AF">背景</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#1-ros2-%E5%9B%BE">1. ROS2 图</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#2-ros2-%E4%B8%AD%E7%9A%84%E8%8A%82%E7%82%B9nodes">2. ROS2 中的节点（nodes）</a></li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#%E5%89%8D%E6%8F%90">前提</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#1-ros2-run">1. ros2 run</a></li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#2-ros2-node-list">2. ros2 node list</a>
<ul>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#21-%E9%87%8D%E6%96%B0%E6%98%A0%E5%B0%84remapping">2.1. 重新映射（remapping）</a></li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#3-ros2-node-info">3. ros2 node info</a></li>
</ul>
</li>
<li><a href="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/intro.html#%E5%B0%8F%E7%BB%93">小结</a></li>
</ul>
<h2 id="背景-2"><a class="header" href="#背景-2">背景</a></h2>
<h3 id="1-ros2-图"><a class="header" href="#1-ros2-图">1. ROS2 图</a></h3>
<p>ROS2 图是一个同时处理数据的 ROS2 元素的网络。如果要将所有可执行文件映射出来并对其进行可视化，那么它包含了所有可执行文件以及它们之间的连接。</p>
<h3 id="2-ros2-中的节点nodes"><a class="header" href="#2-ros2-中的节点nodes">2. ROS2 中的节点（nodes）</a></h3>
<p>ROS 中的每个 node 应该负责一个单一的模块用途（例如，一个节点用于控制车轮马达，一个节点用于控制激光测距仪等）。每个 node 可以通过 topics、services、actions 或 parameters 向其他 node 发送和接收数据。</p>
<p><img src="02.ROS2%E6%95%99%E7%A8%8B/%E5%88%9D%E7%BA%A7/%E7%90%86%E8%A7%A3%20ROS2%20nodes/Nodes-TopicandService.gif" alt="nodes" /></p>
<p>一个完整的机器人系统由许多协同工作的 nodes 组成。在 ROS2 中，单个可执行程序（C++ 程序、Python 程序等）可以包含一个或多个 nodes。</p>
<h2 id="前提-2"><a class="header" href="#前提-2">前提</a></h2>
<h3 id="1-ros2-run"><a class="header" href="#1-ros2-run">1. ros2 run</a></h3>
<p>命令 <code>ros2 run</code> 会启动某个 ROS2 package 中的可执行文件：</p>
<pre><code class="language-shell">ros2 run &lt;package_name&gt; &lt;executable_name&gt;
</code></pre>
<p>为了运行 <code>turtlesim</code>，我们打开了一个命令行窗口，并输入下面命令：</p>
<pre><code class="language-shell">ros2 run turtlesim turtlesim_node
</code></pre>
<p>像前一个教程那样，我们会看到一个 <code>turtlesim</code> 的窗口。</p>
<p>在这里，package 名称叫做 <code>turtlesim</code>，可执行文件名称为 <code>turtlesim_node</code>。</p>
<p>但是，我们仍然不知道 node 的名称，您可以使用 <code>ros2 node list</code> 命令查找 nodes 的名称。</p>
<h3 id="2-ros2-node-list"><a class="header" href="#2-ros2-node-list">2. ros2 node list</a></h3>
<p><code>ros2 node list</code> 命令将会展示给你所有正在运行的 nodes 的名称列表。当您希望与某个 node 进行交互，或者当您的系统运行着许多 nodes 并需要跟踪它们时，这种方法尤其有用。</p>
<p>当 <code>turtlesim</code> 仍然在它所在终端中运行时打开一个新的终端，输入以下命令:</p>
<pre><code class="language-shell">ros2 node list
</code></pre>
<p>终端将返回节点名:</p>
<pre><code class="language-shell">/turtlesim
</code></pre>
<p>打开另一个新的终端，用以下命令启动远程操作节点:</p>
<pre><code class="language-shell">ros2 run turtlesim turtle_teleop_key
</code></pre>
<p>在这里，我们再次搜索 <code>turtlesim</code> 包，这次是为了找名为 <code>turtle_teleop_key</code> 的可执行文件。</p>
<p>返回到运行 <code>ros2 node list</code> 的终端，并再次运行它。现在您将看到两个活动 nodes 的名称:</p>
<pre><code class="language-shell">/turtlesim
/teleop_turtle
</code></pre>
<h4 id="21-重新映射remapping"><a class="header" href="#21-重新映射remapping">2.1. 重新映射（remapping）</a></h4>
<p><a href="https://design.ros2.org/articles/ros_command_line_arguments.html#name-remapping-rules">重新映射</a> 允许您将缺省 node 属性（如 node 名、topic 名、service 名等）重新分配成你的自定义值。在上一个教程中，您使用 <code>turtle_teleop_key</code> 上的重新映射来更改所控制的默认乌龟对象。</p>
<p>现在，让我们重新分配 <code>/turtlesim</code> node 的名称。在新的终端中，运行以下命令:</p>
<pre><code class="language-shell">ros2 run turtlesim turtlesim_node --ros-args --remap __node:=my_turtle
</code></pre>
<p>因为你再次调用了 <code>ros2 run</code> 命令作用到 <code>turtlesim</code> 包上，会启动打开另一个 <code>turtlesim</code> 窗口。这时，如果你重新在你输入过 <code>ros2 node list</code> 的终端中再次输入命令，会看到三个 node 名称：</p>
<pre><code class="language-shell">/my_turtle
/turtlesim
/teleop_turtle
</code></pre>
<h3 id="3-ros2-node-info"><a class="header" href="#3-ros2-node-info">3. ros2 node info</a></h3>
<p>现在您已经知道了 node 的名称，您可以通过以下方法访问关于它们的更多信息:</p>
<pre><code class="language-shell">ros2 node info &lt;node_name&gt;
</code></pre>
<p>要检查最新的 node —— <code>my_turtle</code>，请运行以下命令:</p>
<pre><code class="language-shell">ros2 node info /my_turtle
</code></pre>
<p><code>ros2 node info</code> 返回与该 node 交互的 subscribers、publishers、services 和 actions（ROS2 图中的连接）的列表。输出应该是这样的:</p>
<pre><code class="language-shell">/my_turtle
  Subscribers:
    /parameter_events: rcl_interfaces/msg/ParameterEvent
    /turtle1/cmd_vel: geometry_msgs/msg/Twist
  Publishers:
    /parameter_events: rcl_interfaces/msg/ParameterEvent
    /rosout: rcl_interfaces/msg/Log
    /turtle1/color_sensor: turtlesim/msg/Color
    /turtle1/pose: turtlesim/msg/Pose
  Service Servers:
    /clear: std_srvs/srv/Empty
    /kill: turtlesim/srv/Kill
    /my_turtle/describe_parameters: rcl_interfaces/srv/DescribeParameters
    /my_turtle/get_parameter_types: rcl_interfaces/srv/GetParameterTypes
    /my_turtle/get_parameters: rcl_interfaces/srv/GetParameters
    /my_turtle/list_parameters: rcl_interfaces/srv/ListParameters
    /my_turtle/set_parameters: rcl_interfaces/srv/SetParameters
    /my_turtle/set_parameters_atomically: rcl_interfaces/srv/SetParametersAtomically
    /reset: std_srvs/srv/Empty
    /spawn: turtlesim/srv/Spawn
    /turtle1/set_pen: turtlesim/srv/SetPen
    /turtle1/teleport_absolute: turtlesim/srv/TeleportAbsolute
    /turtle1/teleport_relative: turtlesim/srv/TeleportRelative
  Service Clients:

  Action Servers:
    /turtle1/rotate_absolute: turtlesim/action/RotateAbsolute
  Action Clients:
</code></pre>
<p>现在尝试在 <code>/teleop_turtle</code> node 上运行相同的命令，看看它的连接与 <code>my_turtle</code> 有何不同。</p>
<p>您将在即将到来的教程中了解更多关于 ROS2 图连接的概念，包括消息类型。</p>
<h2 id="小结-2"><a class="header" href="#小结-2">小结</a></h2>
<p>在机器人系统中，node 是为单一的模块化目的服务的基础的 ROS2 元素。</p>
<p>在本教程中，您通过运行可执行程序 <code>turtlesim_node</code> 和 <code>turtle_teleop_key</code> 来利用 <code>turtlesim</code> 包创建的 nodes。</p>
<p>您学习了如何使用 <code>ros2 node list</code> 发现活动 node 的名称，以及使用 <code>ros2 node info</code> 对单个 node 进行信息查询。这些工具对于理解复杂的真实世界机器人系统中的数据流至关重要。</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-指南"><a class="header" href="#how-to-指南">How-to 指南</a></h1>
<p><a href="http://docs.ros.org/en/humble/How-To-Guides.html">todo</a></p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>

        <!-- Livereload script (if served using the cli tool) -->
        <script type="text/javascript">
            const wsProtocol = location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsAddress = wsProtocol + "//" + location.host + "/" + "__livereload";
            const socket = new WebSocket(wsAddress);
            socket.onmessage = function (event) {
                if (event.data === "reload") {
                    socket.close();
                    location.reload();
                }
            };

            window.onbeforeunload = function() {
                socket.close();
            }
        </script>



        <script type="text/javascript">
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->

        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </body>
</html>
